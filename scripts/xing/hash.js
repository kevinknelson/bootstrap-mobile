/*!
 * xing.hash
 * http://xingcreative.com/
 *
 * Copyright 2013 Kevin K. Nelson
 * Released under the MIT license
 */
;define(["jquery","require"],function(g,d,c){var j,e,a=window,m=document,h={},b=null,f=function(o){return{key:o[0],value:o[1]}},i=function(p){h={};var o=p.split("&");g.each(o,function(q,s){var r=f(s.split("="));if(h[r.key]===c){h[r.key]=r.value}else{if(typeof h[r.key]=="object"){h[r.key].push(r.value)}else{h[r.key]=[h[r.key],r.value]}}h[r[0]]=r[1]})},l=function(q){var o="",p=q.split("/");g.each(p,function(r,s){if(s!=""){o+=(o==""||o=="#"?"":"-")+s}});return o},n=function(t){var s=t.split("?"),p=l(s[0]),q=p==""||p=="#"?e:g(p),o=q.data("script"),r=q.data("template"),u=function(){if(o!=null){q.trigger("scriptloaded")}};if(s[1]!==c){i(s[1])}if(b!=t&&(o!=null||r!=null)){var v=["require"];if(o!=null){v.push(o)}if(r!=null){g.get(d.toUrl(r),function(w){q.html(w);q.data("template",null);requirejs(v,u)})}else{requirejs(v,u)}}if(t!==c&&t!=b){b=t;j.each(function(){var w=g(this);w.toggle(w[0]===q[0])})}},k={get:function(o){return h[o]===c?null:h[o]},changePage:function(o){window.location.hash=o}};g(a).on("hashchange",function(){if(a.location.hash!=b){n(a.location.hash)}});g(m).on("click.page","[data-toggle=page]",function(o){a.location.hash=g(this).data("target")});g(m).on("click.nav",".navbar-collapse.in",function(o){if(g(o.target).is("a")){g(this).collapse("hide")}});g(m).ready(function(){j=g(".page");e=j.first();n(a.location.hash)});return k});