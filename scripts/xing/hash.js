/*!
 * xing.hash
 * http://xingcreative.com/
 *
 * Copyright 2013 Kevin K. Nelson
 * Released under the MIT license
 */
;define(["jquery","require","xing"],function(f,i,d,h){var l,j,o=window,q=document,a={},s=null,g="",p="",c="",k=null,e=function(t){return{key:t[0],value:t[1]}},m=function(u){a={};var t=u.split("&");f.each(t,function(v,x){var w=e(x.split("="));if(a[w.key]===h){a[w.key]=w.value}else{if(typeof a[w.key]=="object"){a[w.key].push(w.value)}else{a[w.key]=[a[w.key],w.value]}}a[w[0]]=w[1]})},r=function(t){return t.replace("/","-")},b=function(v){var t=r(v),u=v==""?j:f("#"+t);if(u.length){return u}u=f("<div />").attr("id",t).addClass("page").data("script",c+"/"+v).data("template",g+"/"+v+p);k.append(u);l=f(".page");return u},n=function(y){var x=y.split("?"),t=x[0].replace(/^(#|\/|!)+/,""),v=b(t),u=v.data("script"),w=v.data("template"),z=function(){if(u!=null){v.trigger("scriptloaded")}};if(x[1]!==h){m(x[1])}if(s!=y&&(u!=null||w!=null)){var A=["require"];if(u!=null){A.push(u)}if(w!=null){f.get(i.toUrl(w),function(B){v.html(B);v.data("template",null);requirejs(A,z)})}else{requirejs(A,z)}}if(y!==h&&y!=s){s=y;l.each(function(){var B=f(this);B.toggle(B[0]===v[0])})}};d.hash={get:function(t){return a[t]===h?null:a[t]},changePage:function(t){window.location.hash=t},config:function(u,t,w,v){k=f(u);g=w;p=v;c=t},init:function(){l=f(".page");j=l.first();n(o.location.hash)}};f(o).on("hashchange",function(){if(o.location.hash!=s){n(o.location.hash)}});f(q).on("click.page","[data-toggle=page]",function(t){o.location.hash=f(this).data("target")});f(q).on("click.nav",".navbar-collapse.in",function(t){if(f(t.target).is("a")){f(this).collapse("hide")}});return d.hash});